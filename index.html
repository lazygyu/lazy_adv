<doctype html>
  <html>

  <head>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
      }

      #container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: black;
      }

      #container>canvas {
        height: 100%;
      }
    </style>
  </head>

  <body>
    <div id="container">
    </div>
    <script id="shader-stage" type="x-shader/x-fragment">
      
    </script>
    <script id="shader-fs" type="x-shader/x-fragment">
    
      precision mediump float;

      varying vec2 vTextureCoord;
      varying highp vec3 vLighting;

      uniform sampler2D uSampler;
      uniform sampler2D normalMap;

      uniform vec3 topC;
      uniform vec3 leftC;
      uniform vec3 bottomC;
      uniform vec3 rightC;

      void main(void) {
        mediump vec4 texelColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        mediump vec4 texelColor2 = texture2D(normalMap, vec2(vTextureCoord.s, vTextureCoord.t));
        int mask = int(texelColor2.r * 255.0);
        mediump vec4 tmp = vec4(texelColor.rgb * vLighting, texelColor.a);
        highp float r = 1.0;
        highp float g = 1.0;
        highp float b = 1.0;
        if( mask <= 0 ){
          gl_FragColor = tmp;
        }else{
        if( mask >= 8 ){
          mask = mask - 8;
          r *= leftC.r;
          g *= leftC.g;
          b *= leftC.b;
        }
        if(mask >= 4){
          mask = mask - 4;
          r *= bottomC.r;
          g *= bottomC.g;
          b *= bottomC.b;
        }
        if(mask >= 2){
          mask = mask - 2;
          r *= rightC.r;
          g *= rightC.g;
          b *= rightC.b;
        }
        if(mask >= 1){
          mask = mask - 1;
          r *= topC.r;
          g *= topC.g;
          b *= topC.b;
        }
        
        gl_FragColor = vec4(tmp.rgb * vec3(r, g, b), texelColor.a);
        }
      }
    </script>

    <script id="shader-vs" type="x-shader/x-vertex">
      attribute highp vec3 aVertexNormal;
      attribute highp vec3 aVertexPosition;
      attribute highp vec2 aTextureCoord;

      uniform highp mat4 uNormalMatrix;
      uniform highp mat4 uMVMatrix;
      uniform highp mat4 uPMatrix;
      uniform highp vec3 ambientLight;

      varying highp vec2 vTextureCoord;
      varying highp vec3 vLighting;

      void main(void) {
        gl_Position = vec4(aVertexPosition, 1.0);
        vTextureCoord = aTextureCoord;

        // Apply lighting effect

        
        highp vec3 directionalLightColor = vec3(0.5, 0.5, 0.75);
        highp vec3 directionalVector = vec3(0.85, 0.8, 0.75);

        highp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);

        highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
        vLighting = ambientLight;
      }
    </script>
    <script type="text/javascript" src="lib/glmatrix.min.js"></script>
    <script type="text/javascript" src="dist/app.wp.js"></script>
  </body>

  </html>